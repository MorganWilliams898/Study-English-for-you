@echo off
setlocal enabledelayedexpansion

:: åˆ›å»ºä¸´æ—¶æ–‡ä»¶å¤¹
set "FOLDER=listenlab-site"
if exist "%FOLDER%" rmdir /s /q "%FOLDER%"
mkdir "%FOLDER%"

:: ========== 1. å†™å…¥ index.html ==========
(
echo ^<!DOCTYPE html^>
echo ^<html lang="zh-CN"^>
echo ^<head^>
echo   ^<meta charset="UTF-8" /^>
echo   ^<meta name="viewport" content="width=device-width, initial-scale=1.0"/^>
echo   ^<title^>ListenLabï½œYouTube è‹±è¯­ç²¾å¬è®­ç»ƒç«™^</title^>
echo   ^<style^>
echo     :root { --primary: #ff0000; --primary-dark: #cc0000; --bg: #f9f9f9; --card: #ffffff; --text: #333; --text-light: #666; --border: #e0e0e0; --success: #4caf50; --warning: #ff9800; --gray: #9e9e9e; --shadow: 0 2px 10px rgba^^(0,0,0,0.05^); }
echo     * { box-sizing: border-box; margin: 0; padding: 0; }
echo     body { font-family: "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif; line-height: 1.6; color: var^(--text^); background-color: var^(--bg^); padding-bottom: 80px; }
echo     .container { max-width: 1200px; margin: 0 auto; padding: 0 16px; }
echo     header { background: linear-gradient^^(135deg, #1a2a6c, #2c3e50^); color: white; padding: 20px 0; text-align: center; box-shadow: var^(--shadow^); }
echo     h1 { font-size: 2rem; font-weight: 700; margin-bottom: 8px; }
echo     .subtitle { font-size: 1.1rem; opacity: 0.9; max-width: 700px; margin: 0 auto; }
echo     .tabs { display: flex; border-bottom: 2px solid var^(--border^); margin: 24px 0; }
echo     .tab-btn { padding: 12px 24px; background: none; border: none; font-size: 1.1rem; font-weight: 600; color: var^(--text-light^); cursor: pointer; position: relative; transition: all 0.2s; }
echo     .tab-btn.active { color: var^(--primary^); }
echo     .tab-btn.active::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 100%; height: 3px; background: var^(--primary^); border-radius: 3px; }
echo     .section { display: none; padding: 24px 0; }
echo     .section.active { display: block; animation: fadeIn 0.3s ease; }
echo     @keyframes fadeIn { from { opacity: 0; transform: translateY^^(10px^); } to { opacity: 1; transform: translateY^^(0^); } }
echo     .card { background: var^(--card^); border-radius: 12px; box-shadow: var^(--shadow^); padding: 24px; margin-bottom: 24px; border: 1px solid var^(--border^); }
echo     .card-title { font-size: 1.4rem; margin-bottom: 16px; color: var^(--text^); display: flex; align-items: center; gap: 8px; }
echo     .card-title i { color: var^(--primary^); font-size: 1.2rem; }
echo     .video-container { position: relative; border-radius: 12px; overflow: hidden; margin-bottom: 24px; background: #000; aspect-ratio: 16/9; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; text-align: center; padding: 20px; }
echo     .video-placeholder { background: url^('https://bailian-bmp-pre.oss-cn-hangzhou.aliyuncs.com/public/system_agent/PlaceHolder.png'^) center/cover no-repeat; width: 100%; height: 100%; position: absolute; top: 0; left: 0; opacity: 0.15; }
echo     .video-info { position: relative; z-index: 2; text-align: left; width: 100%; padding: 0 16px; }
echo     .video-title { font-size: 1.3rem; font-weight: 700; margin-bottom: 8px; }
echo     .video-meta { display: flex; gap: 16px; font-size: 0.9rem; color: #aaa; margin-bottom: 16px; }
echo     .badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; }
echo     .badge.level { background: #e3f2fd; color: #1976d2; }
echo     .badge.scene { background: #f3e5f5; color: #7b1fa2; }
echo     .badge.type { background: #e8f5e9; color: #388e3c; }
echo     .controls { display: flex; flex-wrap: wrap; gap: 12px; margin: 16px 0; }
echo     .btn { padding: 10px 20px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: inline-flex; align-items: center; gap: 6px; }
echo     .btn-primary { background: var^(--primary^); color: white; }
echo     .btn-primary:hover { background: var^(--primary-dark^); }
echo     .btn-outline { background: transparent; border: 1px solid var^(--primary^); color: var^(--primary^); }
echo     .btn-sm { padding: 6px 14px; font-size: 0.9rem; }
echo     .subtitle-display { background: rgba^^(0,0,0,0.7^); color: white; padding: 16px; border-radius: 8px; margin: 20px 0; font-size: 1.3rem; min-height: 60px; display: flex; align-items: center; justify-content: center; text-align: center; line-height: 1.5; word-break: break-word; cursor: pointer; transition: background 0.2s; }
echo     .subtitle-display:hover { background: rgba^^(0,0,0,0.85^); }
echo     .sentence-list { display: grid; grid-template-columns: repeat^^(auto-fill, minmax^^(300px, 1fr^); gap: 16px; margin-top: 16px; }
echo     .sentence-item { padding: 14px; background: #f5f5f5; border-radius: 8px; cursor: pointer; transition: all 0.2s; border-left: 4px solid var^(--primary^); }
echo     .sentence-item:hover { background: #eef2ff; }
echo     .sentence-item.active { background: #e3f2fd; }
echo     .word-popup { position: fixed; top: 50%%; left: 50%%; transform: translate^(-50%%, -50%%^); background: white; border-radius: 12px; box-shadow: 0 10px 30px rgba^^(0,0,0,0.2^); padding: 24px; width: 90%%; max-width: 500px; z-index: 1000; display: none; border: 1px solid var^(--border^); }
echo     .popup-close { position: absolute; top: 16px; right: 16px; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #999; }
echo     .word-header { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; }
echo     .word-text { font-size: 1.5rem; font-weight: 700; color: var^(--text^); }
echo     .word-pos { background: #e3f2fd; color: #1976d2; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; }
echo     .word-def { margin: 16px 0; line-height: 1.6; }
echo     .word-example { padding: 12px; background: #f9f9f9; border-radius: 8px; font-style: italic; color: #555; }
echo     .practice-area { margin-top: 24px; padding: 20px; background: #f0f8ff; border-radius: 12px; border-left: 4px solid var^(--primary^); }
echo     .practice-title { font-weight: 700; margin-bottom: 12px; color: #1976d2; }
echo     .input-group { margin-bottom: 16px; }
echo     .input-group label { display: block; margin-bottom: 6px; font-weight: 600; }
echo     .input-group input, .input-group textarea { width: 100%%; padding: 12px; border: 1px solid var^(--border^); border-radius: 8px; font-size: 1rem; }
echo     .feedback { padding: 12px; border-radius: 8px; margin-top: 12px; display: none; }
echo     .feedback.correct { background: #e8f5e9; color: #388e3c; }
echo     .feedback.incorrect { background: #ffebee; color: #d32f2f; }
echo     .stats-grid { display: grid; grid-template-columns: repeat^^(auto-fit, minmax^^(200px, 1fr^); gap: 16px; margin-top: 16px; }
echo     .stat-card { background: white; border-radius: 12px; padding: 20px; text-align: center; box-shadow: var^(--shadow^); border: 1px solid var^(--border^); }
echo     .stat-value { font-size: 2rem; font-weight: 700; color: var^(--primary^); }
echo     .stat-label { font-size: 0.9rem; color: var^(--text-light^); }
echo     .calendar { display: grid; grid-template-columns: repeat^^(7, 1fr^); gap: 4px; margin-top: 16px; }
echo     .calendar-day { aspect-ratio: 1; border-radius: 50%%; display: flex; align-items: center; justify-content: center; font-size: 0.85rem; cursor: pointer; transition: all 0.2s; }
echo     .calendar-day.other-month { color: #ccc; }
echo     .calendar-day.today { background: var^(--primary^); color: white; }
echo     .calendar-day.completed { background: var^(--success^); color: white; }
echo     .calendar-day.missed { background: #f44336; color: white; }
echo     footer { text-align: center; padding: 24px 0; color: var^(--text-light^); font-size: 0.9rem; margin-top: 40px; border-top: 1px solid var^(--border^); }
echo     @media (max-width: 768px) { .tabs { flex-wrap: wrap; } .tab-btn { padding: 10px 16px; font-size: 1rem; } .video-container { aspect-ratio: 4/3; } .sentence-list { grid-template-columns: 1fr; } h1 { font-size: 1.6rem; } }
echo   ^</style^>
echo ^</head^>
echo ^<body^>
echo ^<header^>
echo   ^<div class="container"^>
echo     ^<h1^>ğŸ§ ListenLab^</h1^>
echo     ^<p class="subtitle"^>ä¸“æ³¨ YouTube è‹±è¯­ç²¾å¬ï½œå˜é€Ÿå¬åŠ› Ã— å¤šæ¨¡å­—å¹• Ã— è¯å¥æ‹†è§£ Ã— å¬å†™æ‰“å¡^</p^>
echo   ^</div^>
echo ^</header^>
echo ^<div class="container"^>
echo   ^<div class="tabs"^>
echo     ^<button class="tab-btn active" data-tab="library"^>ğŸ“š ç´ æåº“^</button^>
echo     ^<button class="tab-btn" data-tab="player"^>â–¶ï¸ æ²‰æµ¸å­¦ä¹ ^</button^>
echo     ^<button class="tab-btn" data-tab="practice"^>âœï¸ è¯å¥ç»ƒä¹ ^</button^>
echo     ^<button class="tab-btn" data-tab="review"^>ğŸ” å·©å›ºå¤ä¹ ^</button^>
echo     ^<button class="tab-btn" data-tab="stats"^>ğŸ“Š å­¦ä¹ ç®¡ç†^</button^>
echo   ^</div^>
echo ^<section id="library" class="section active"^>
echo     ^<div class="card"^>
echo       ^<h2 class="card-title"^>^<i^>ğŸ“^</i^> ç²¾é€‰ YouTube è‹±è¯­ç´ æåº“^</h2^>
echo       ^<p^>æŒ‰åœºæ™¯ã€ç±»å‹ã€éš¾åº¦ç²¾å‡†åˆ†ç±»ï¼Œæ¯æ¡è§†é¢‘å·²åˆ‡åˆ†ä¸ºç‹¬ç«‹å¥å­ï¼Œæ”¯æŒä¸€é”®è·³è½¬å­¦ä¹ ^</p^>
echo ^<div class="filters" style="margin: 20px 0; display: flex; flex-wrap: wrap; gap: 12px;"^>
echo         ^<select id="filter-scene" class="btn btn-sm btn-outline"^>
echo           ^<option value=""^>å…¨éƒ¨åœºæ™¯^</option^>
echo           ^<option value="daily"^>æ—¥å¸¸^</option^>
echo           ^<option value="work"^>èŒåœº^</option^>
echo           ^<option value="travel"^>æ—…æ¸¸^</option^>
echo         ^</select^>
echo         ^<select id="filter-level" class="btn btn-sm btn-outline"^>
echo           ^<option value=""^>å…¨éƒ¨éš¾åº¦^</option^>
echo           ^<option value="beginner"^>å…¥é—¨^</option^>
echo           ^<option value="intermediate"^>ä¸­çº§^</option^>
echo           ^<option value="advanced"^>é«˜çº§^</option^>
echo         ^</select^>
echo         ^<input type="text" id="search-input" placeholder="å…³é”®è¯æœç´¢..." class="btn-sm" style="padding: 10px 14px; flex: 1; max-width: 240px;"^>
echo       ^</div^>
echo ^<div id="video-grid" class="sentence-list"^>^</div^>
echo     ^</div^>
echo   ^</section^>
echo ^<section id="player" class="section"^>
echo     ^<div class="card"^>
echo       ^<h2 class="card-title"^>^<i^>ğŸ”Š^</i^> æ²‰æµ¸å¼å¬åŠ›è®­ç»ƒ^</h2^>
echo ^<div class="video-container"^>
echo         ^<div class="video-placeholder"^>^</div^>
echo         ^<div class="video-info"^>
echo           ^<div class="video-title" id="video-title"^>BBC Learning English: How to Order Coffee^</div^>
echo           ^<div class="video-meta"^>
echo             ^<span class="badge scene"^>æ—¥å¸¸^</span^>
echo             ^<span class="badge level"^>å…¥é—¨^</span^>
echo             ^<span class="badge type"^>å¯¹è¯^</span^>
echo             ^<span^>â±ï¸ 2m 18s^</span^>
echo           ^</div^>
echo           ^<p id="video-desc"^>å­¦ä¹ åœ¨å’–å•¡é¦†ç‚¹å•çš„å®ç”¨è‹±è¯­è¡¨è¾¾ï¼Œè¯­é€Ÿæ…¢ã€å‘éŸ³æ¸…æ™°ï¼Œé€‚åˆåˆå­¦è€…è·Ÿè¯»æ¨¡ä»¿ã€‚^</p^>
echo         ^</div^>
echo       ^</div^>
echo ^<div class="controls"^>
echo         ^<button id="play-btn" class="btn btn-primary"^>^<i^>â–¶^</i^> æ’­æ”¾^</button^>
echo         ^<button id="pause-btn" class="btn btn-outline"^>^<i^>â¸^</i^> æš‚åœ^</button^>
echo         ^<button id="loop-btn" class="btn btn-outline"^>^<i^>ğŸ”^</i^> å•å¥å¾ªç¯^</button^>
echo         ^<div style="display: flex; align-items: center; gap: 8px;"^>
echo           ^<span^>é€Ÿåº¦ï¼š^</span^>
echo           ^<input type="range" id="speed-slider" min="0.5" max="2.0" step="0.1" value="1.0"^>
echo           ^<span id="speed-value"^>1.0x^</span^>
echo         ^</div^>
echo       ^</div^>
echo ^<div class="subtitle-display" id="subtitle-display"^>
echo         Click any word below to look it up!
echo       ^</div^>
echo ^<div class="sentence-list" id="sentence-list"^>^</div^>
echo ^<div class="practice-area"^>
echo         ^<h3 class="practice-title"^>ğŸ“ å½“å‰å¥å­å¬å†™^</h3^>
echo         ^<div class="input-group"^>
echo           ^<label for="dictation-input"^>è¯·å¬å†™ä¸‹æ–¹å¥å­ï¼ˆæ’­æ”¾åå¼€å§‹ï¼‰ï¼š^</label^>
echo           ^<input type="text" id="dictation-input" placeholder="Type what you hear..."^>
echo         ^</div^>
echo         ^<button id="check-dictation" class="btn btn-primary"^>âœ… æäº¤æ£€æŸ¥^</button^>
echo         ^<div id="dictation-feedback" class="feedback"^>^</div^>
echo       ^</div^>
echo     ^</div^>
echo   ^</section^>
echo ^<section id="practice" class="section"^>
echo     ^<div class="card"^>
echo       ^<h2 class="card-title"^>^<i^>ğŸ“–^</i^> è¯å¥é’ˆå¯¹æ€§ç»ƒä¹ ^</h2^>
echo       ^<p^>ä»å½“å‰è§†é¢‘ä¸­è‡ªåŠ¨æå–é‡ç‚¹è¯å¥ï¼Œæ”¯æŒå¬å†™ã€å¡«ç©ºã€æ­é…è®­ç»ƒ^</p^>
echo ^<div class="sentence-list" id="practice-list"^>^</div^>
echo ^<div class="practice-area"^>
echo         ^<h3 class="practice-title"^>ğŸ¯ å½“å‰ç»ƒä¹ ï¼šé€‰è¯å¡«ç©º^</h3^>
echo         ^<p id="fill-in-sentence"^>I ___ like coffee with milk.^</p^>
echo         ^<div style="display: flex; gap: 12px; margin: 12px 0;"^>
echo           ^<button class="btn btn-outline fill-option" data-word="do"^>do^</button^>
echo           ^<button class="btn btn-outline fill-option" data-word="don't"^>don't^</button^>
echo           ^<button class="btn btn-outline fill-option" data-word="does"^>does^</button^>
echo         ^</div^>
echo         ^<div id="fill-feedback" class="feedback"^>^</div^>
echo       ^</div^>
echo     ^</div^>
echo   ^</section^>
echo ^<section id="review" class="section"^>
echo     ^<div class="card"^>
echo       ^<h2 class="card-title"^>^<i^>ğŸ§ ^</i^> å·©å›ºè®°å¿† â€”â€” ç”Ÿè¯æœ¬æ‰“å¡^</h2^>
echo       ^<p^>ä½ ç‚¹å‡»æŸ¥è¿‡çš„å•è¯å·²è‡ªåŠ¨åŠ å…¥ç”Ÿè¯æœ¬ï¼ŒæŒ‰è‰¾å®¾æµ©æ–¯è§„å¾‹æé†’å¤ä¹ ^</p^>
echo ^<div class="stats-grid"^>
echo         ^<div class="stat-card"^>
echo           ^<div class="stat-value" id="review-count"^>7^</div^>
echo           ^<div class="stat-label"^>ä»Šæ—¥å¾…å¤ä¹ ^</div^>
echo         ^</div^>
echo         ^<div class="stat-card"^>
echo           ^<div class="stat-value" id="mastered-count"^>23^</div^>
echo           ^<div class="stat-label"^>å·²æŒæ¡^</div^>
echo         ^</div^>
echo         ^<div class="stat-card"^>
echo           ^<div class="stat-value" id="streak"^>5^</div^>
echo           ^<div class="stat-label"^>è¿ç»­æ‰“å¡^</div^>
echo         ^</div^>
echo       ^</div^>
echo ^<div class="sentence-list" id="review-list"^>^</div^>
echo ^<div style="margin-top: 24px;"^>
echo         ^<button id="start-review" class="btn btn-primary"^>âœ… å¼€å§‹ä»Šæ—¥å¤ä¹ ï¼ˆ7è¯ï¼‰^</button^>
echo       ^</div^>
echo     ^</div^>
echo   ^</section^>
echo ^<section id="stats" class="section"^>
echo     ^<div class="card"^>
echo       ^<h2 class="card-title"^>^<i^>ğŸ“ˆ^</i^> å­¦ä¹ ç®¡ç†ä¸­å¿ƒ^</h2^>
echo ^<div class="stats-grid"^>
echo         ^<div class="stat-card"^>
echo           ^<div class="stat-value" id="total-minutes"^>84^</div^>
echo           ^<div class="stat-label"^>ç´¯è®¡å­¦ä¹ ï¼ˆåˆ†é’Ÿï¼‰^</div^>
echo         ^</div^>
echo         ^<div class="stat-card"^>
echo           ^<div class="stat-value" id="videos-completed"^>12^</div^>
echo           ^<div class="stat-label"^>å®Œæˆè§†é¢‘^</div^>
echo         ^</div^>
echo         ^<div class="stat-card"^>
echo           ^<div class="stat-value" id="words-learned"^>156^</div^>
echo           ^<div class="stat-label"^>æŒæ¡è¯æ±‡^</div^>
echo         ^</div^>
echo       ^</div^>
echo ^<h3 style="margin: 24px 0 12px;"^>ğŸ“… æ‰“å¡æ—¥å†ï¼ˆæœ€è¿‘30å¤©ï¼‰^</h3^>
echo       ^<div class="calendar" id="calendar"^>^</div^>
echo ^<div style="margin-top: 24px; display: flex; gap: 12px; flex-wrap: wrap;"^>
echo         ^<button id="mark-today" class="btn btn-primary"^>âœ… æ ‡è®°ä»Šæ—¥æ‰“å¡^</button^>
echo         ^<button id="view-history" class="btn btn-outline"^>ğŸ” æŸ¥çœ‹å­¦ä¹ è®°å½•^</button^>
echo       ^</div^>
echo     ^</div^>
echo   ^</section^>
echo ^</div^>
echo ^<div class="word-popup" id="word-popup"^>
echo   ^<button class="popup-close" id="popup-close"^>&times;^</button^>
echo   ^<div class="word-header"^>
echo     ^<span class="word-text" id="popup-word"^>coffee^</span^>
echo     ^<span class="word-pos" id="popup-pos"^>noun^</span^>
echo   ^</div^>
echo   ^<div class="word-def" id="popup-def"^>A hot drink made from roasted and ground beans of a tropical shrub.^</div^>
echo   ^<div class="word-example"^>
echo     ^<strong^>Example:^</strong^> ^<span id="popup-example"^>I drink two cups of coffee every morning.^</span^>
echo   ^</div^>
echo ^</div^>
echo ^<footer^>
echo   ^<div class="container"^>
echo     ^<p^>ListenLab Â· ä¸ºæ— ç¼–ç¨‹åŸºç¡€è‹±è¯­çˆ±å¥½è€…æ‰“é€ ï½œGitHub Pages å¯ç›´æ¥éƒ¨ç½² Â· æ•°æ®æœ¬åœ°æ¨¡æ‹Ÿï¼Œé›¶ä¾èµ–^</p^>
echo     ^<p style="margin-top: 8px; font-size: 0.85rem; color: #777;"^>ğŸ’¡ å°æç¤ºï¼šæ‰€æœ‰åŠŸèƒ½å‡å·²åœ¨å• HTML æ–‡ä»¶ä¸­å®ç°ï¼Œä¸‹è½½åä¸Šä¼ è‡³ GitHub ä»“åº“å¹¶å¼€å¯ Pages å³å¯ä½¿ç”¨ï¼^</p^>
echo   ^</div^>
echo ^</footer^>
echo ^<script^>
echo   const SAMPLE_VIDEOS = [ { id: "bbccoffee", title: "BBC Learning English: How to Order Coffee", scene: "daily", level: "beginner", type: "dialogue", duration: "2m 18s", desc: "å­¦ä¹ åœ¨å’–å•¡é¦†ç‚¹å•çš„å®ç”¨è‹±è¯­è¡¨è¾¾ï¼Œè¯­é€Ÿæ…¢ã€å‘éŸ³æ¸…æ™°ï¼Œé€‚åˆåˆå­¦è€…è·Ÿè¯»æ¨¡ä»¿ã€‚", sentences: [ "Hi, can I get a small coffee, please?", "Sure! Would you like milk or sugar?", "Just milk, thanks.", "Here you go. That'll be Â£2.50.", "Thank you very much!" ], words: [ { word: "coffee", pos: "noun", def: "A hot drink made from roasted and ground beans of a tropical shrub.", example: "I drink two cups of coffee every morning." }, { word: "milk", pos: "noun", def: "A white liquid produced by female mammals to feed their young.", example: "She added milk to her tea." }, { word: "sugar", pos: "noun", def: "A sweet crystalline substance obtained from various plants.", example: "Don't add too much sugar to your coffee." }, { word: "small", pos: "adjective", def: "Of a size that is less than normal or usual.", example: "I'd like a small coffee, please." }, { word: "please", pos: "interjection", def: "Used to make a request polite.", example: "Can I get a coffee, please?" } ] }, { id: "tedtalk", title: "Why We All Need to Practice Empathy", scene: "work", level: "intermediate", type: "speech", duration: "14m 02s", desc: "TED æ¼”è®²èŠ‚é€‰ï¼Œæ¢è®¨å…±æƒ…åŠ›åœ¨èŒåœºä¸ç”Ÿæ´»ä¸­çš„é‡è¦æ€§ï¼Œè¯­é€Ÿé€‚ä¸­ï¼Œå«å¤åˆå¥å’ŒæŠ½è±¡è¯æ±‡ã€‚", sentences: [ "Empathy isn't just about feeling sorry for someone.", "It's about truly understanding their perspective.", "In teams, empathy builds trust and psychological safety.", "Without it, collaboration falls apart.", "So how do we practice it daily?" ], words: [ { word: "empathy", pos: "noun", def: "The ability to understand and share the feelings of another.", example: "Good leaders show empathy toward their team members." }, { word: "perspective", pos: "noun", def: "A particular attitude toward or way of thinking about something.", example: "Try to see the situation from her perspective." }, { word: "collaboration", pos: "noun", def: "The action of working with someone to produce something.", example: "Team collaboration improved after the workshop." } ] } ];
echo   const USER_DATA = { streak: 5, totalMinutes: 84, videosCompleted: 12, wordsLearned: 156, reviewList: [ { word: "coffee", lastSeen: "2024-05-20", nextReview: "2024-05-22" }, { word: "milk", lastSeen: "2024-05-20", nextReview: "2024-05-22" }, { word: "sugar", lastSeen: "2024-05-19", nextReview: "2024-05-23" }, { word: "small", lastSeen: "2024-05-19", nextReview: "2024-05-23" }, { word: "please", lastSeen: "2024-05-18", nextReview: "2024-05-24" }, { word: "empathy", lastSeen: "2024-05-17", nextReview: "2024-05-25" }, { word: "perspective", lastSeen: "2024-05-17", nextReview: "2024-05-25" } ], mastered: ["hello", "world", "yes", "no", "thank", "you", "good", "morning", "afternoon", "evening", "how", "are", "you", "fine", "thanks"], todayCompleted: new Set(["2024-05-21"]), calendarDays: ["2024-05-01", "2024-05-02", "2024-05-03", "2024-05-04", "2024-05-05", "2024-05-06", "2024-05-07", "2024-05-08", "2024-05-09", "2024-05-10", "2024-05-11", "2024-05-12", "2024-05-13", "2024-05-14", "2024-05-15", "2024-05-16", "2024-05-17", "2024-05-18", "2024-05-19", "2024-05-20", "2024-05-21"] };
echo   const tabs = document.querySelectorAll('.tab-btn');
echo   const sections = document.querySelectorAll('.section');
echo   const videoGrid = document.getElementById('video-grid');
echo   const sentenceList = document.getElementById('sentence-list');
echo   const subtitleDisplay = document.getElementById('subtitle-display');
echo   const speedSlider = document.getElementById('speed-slider');
echo   const speedValue = document.getElementById('speed-value');
echo   const playBtn = document.getElementById('play-btn');
echo   const pauseBtn = document.getElementById('pause-btn');
echo   const loopBtn = document.getElementById('loop-btn');
echo   const dictationInput = document.getElementById('dictation-input');
echo   const checkDictationBtn = document.getElementById('check-dictation');
echo   const dictationFeedback = document.getElementById('dictation-feedback');
echo   const fillOptions = document.querySelectorAll('.fill-option');
echo   const fillFeedback = document.getElementById('fill-feedback');
echo   const reviewListEl = document.getElementById('review-list');
echo   const startReviewBtn = document.getElementById('start-review');
echo   const calendarEl = document.getElementById('calendar');
echo   const markTodayBtn = document.getElementById('mark-today');
echo   const popup = document.getElementById('word-popup');
echo   const popupClose = document.getElementById('popup-close');
echo   const popupWord = document.getElementById('popup-word');
echo   const popupPos = document.getElementById('popup-pos');
echo   const popupDef = document.getElementById('popup-def');
echo   const popupExample = document.getElementById('popup-example');
echo   let currentVideo = SAMPLE_VIDEOS[0];
echo   let currentSentenceIndex = 0;
echo   let isLooping = false;
echo   let currentSpeed = 1.0;
echo   function init() { renderVideoGrid(); renderSentenceList(); updateSubtitle(); bindEvents(); renderCalendar(); renderReviewList(); updateStats(); }
echo   function renderVideoGrid() { videoGrid.innerHTML = ''; SAMPLE_VIDEOS.forEach(video => { const div = document.createElement('div'); div.className = 'sentence-item'; div.innerHTML = ` <h3>${video.title}</h3> <div style="display:flex;gap:8px;margin-top:8px;"> <span class="badge scene">${video.scene}</span> <span class="badge level">${video.level}</span> <span class="badge type">${video.type}</span> </div> <p style="font-size:0.9rem;color:#666;margin-top:8px;">${video.desc.substring(0, 60)}...</p> `; div.addEventListener('click', () => { currentVideo = video; currentSentenceIndex = 0; renderSentenceList(); updateSubtitle(); switchTab('player'); }); videoGrid.appendChild(div); }); }
echo   function renderSentenceList() { sentenceList.innerHTML = ''; currentVideo.sentences.forEach((sent, idx) => { const div = document.createElement('div'); div.className = 'sentence-item' + (idx === currentSentenceIndex ? ' active' : ''); div.textContent = sent; div.addEventListener('click', () => { currentSentenceIndex = idx; document.querySelectorAll('.sentence-item').forEach(el => el.classList.remove('active')); div.classList.add('active'); updateSubtitle(); }); sentenceList.appendChild(div); }); }
echo   function updateSubtitle() { if (currentVideo.sentences.length > 0) { const sent = currentVideo.sentences[currentSentenceIndex]; subtitleDisplay.innerHTML = `<strong>[${currentSentenceIndex + 1}/${currentVideo.sentences.length}]</strong> ${sent}`; const words = sent.match(/\b\w+\b/g) || []; const highlighted = words.map(w => `<span class="clickable-word" data-word="${w}">${w}</span>`).join(' '); subtitleDisplay.innerHTML = `<strong>[${currentSentenceIndex + 1}/${currentVideo.sentences.length}]</strong> ${highlighted}`; subtitleDisplay.querySelectorAll('.clickable-word').forEach(span => { span.addEventListener('click', (e) => { const word = e.target.dataset.word.toLowerCase(); const match = currentVideo.words.find(w => w.word.toLowerCase() === word); if (match) { popupWord.textContent = match.word; popupPos.textContent = match.pos; popupDef.textContent = match.def; popupExample.textContent = match.example; popup.style.display = 'block'; } }); }); } }
echo   function renderCalendar() { const today = new Date(); const year = today.getFullYear(); const month = today.getMonth(); const firstDay = new Date(year, month, 1); const lastDay = new Date(year, month + 1, 0); const daysInMonth = lastDay.getDate(); calendarEl.innerHTML = ''; ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(day => { const el = document.createElement('div'); el.className = 'calendar-day'; el.textContent = day.charAt(0); el.style.opacity = '0.7'; calendarEl.appendChild(el); }); const prevLastDay = new Date(year, month, 0).getDate(); const prevStartDay = firstDay.getDay(); for (let i = prevStartDay - 1; i >= 0; i--) { const el = document.createElement('div'); el.className = 'calendar-day other-month'; el.textContent = prevLastDay - i; calendarEl.appendChild(el); } const todayStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`; for (let i = 1; i <= daysInMonth; i++) { const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`; const el = document.createElement('div'); el.className = 'calendar-day'; el.textContent = i; if (dateStr === todayStr) el.classList.add('today'); if (USER_DATA.todayCompleted.has(dateStr)) el.classList.add('completed'); if (i === 15 && !USER_DATA.todayCompleted.has(dateStr)) el.classList.add('missed'); calendarEl.appendChild(el); } }
echo   function renderReviewList() { reviewListEl.innerHTML = ''; USER_DATA.reviewList.forEach((item, idx) => { const div = document.createElement('div'); div.className = 'sentence-item'; div.innerHTML = ` <strong>${item.word}</strong> <span style="color:#777;font-size:0.9rem;">â†’ due ${item.nextReview}</span> <div style="margin-top:8px;font-size:0.9rem;color:#555;"> ${item.word} â€¢ ${SAMPLE_VIDEOS[0].words.find(w => w.word.toLowerCase() === item.word.toLowerCase())?.def || 'definition not found'} </div> `; reviewListEl.appendChild(div); }); }
echo   function updateStats() { document.getElementById('review-count').textContent = USER_DATA.reviewList.length; document.getElementById('mastered-count').textContent = USER_DATA.mastered.length; document.getElementById('streak').textContent = USER_DATA.streak; document.getElementById('total-minutes').textContent = USER_DATA.totalMinutes; document.getElementById('videos-completed').textContent = USER_DATA.videosCompleted; document.getElementById('words-learned').textContent = USER_DATA.wordsLearned; }
echo   function bindEvents() { tabs.forEach(tab => { tab.addEventListener('click', () => { const target = tab.dataset.tab; tabs.forEach(t => t.classList.remove('active')); sections.forEach(s => s.classList.remove('active')); tab.classList.add('active'); document.getElementById(target).classList.add('active'); }); }); speedSlider.addEventListener('input', () => { currentSpeed = parseFloat(speedSlider.value); speedValue.textContent = currentSpeed.toFixed(1) + 'x'; }); playBtn.addEventListener('click', () => { subtitleDisplay.style.opacity = '1'; subtitleDisplay.style.transform = 'scale(1)'; setTimeout(() => { subtitleDisplay.style.opacity = '0.8'; subtitleDisplay.style.transform = 'scale(0.98)'; }, 300); }); pauseBtn.addEventListener('click', () => { subtitleDisplay.style.opacity = '0.6'; subtitleDisplay.style.transform = 'scale(0.95)'; }); loopBtn.addEventListener('click', () => { isLooping = !isLooping; loopBtn.innerHTML = isLooping ? 'â¹ Stop Loop' : 'ğŸ” Single Sentence'; }); checkDictationBtn.addEventListener('click', () => { const userAns = dictationInput.value.trim().toLowerCase(); const correctAns = currentVideo.sentences[currentSentenceIndex].toLowerCase(); dictationFeedback.className = 'feedback'; if (userAns === correctAns) { dictationFeedback.textContent = 'âœ… Correct! Great job!'; dictationFeedback.classList.add('correct'); USER_DATA.mastered.push(currentVideo.sentences[currentSentenceIndex]); } else { dictationFeedback.textContent = `âŒ Incorrect. Correct answer: "${currentVideo.sentences[currentSentenceIndex]}"`; dictationFeedback.classList.add('incorrect'); } dictationFeedback.style.display = 'block'; setTimeout(() => { dictationFeedback.style.display = 'none'; }, 4000); }); fillOptions.forEach(btn => { btn.addEventListener('click', () => { const selected = btn.dataset.word; const correct = 'don\'t'; fillFeedback.className = 'feedback'; if (selected === correct) { fillFeedback.textContent = 'âœ… Correct! â€œI donâ€™t like coffee with milk.â€'; fillFeedback.classList.add('correct'); } else { fillFeedback.textContent = `âŒ Try again! Remember: â€œIâ€ + â€œdonâ€™tâ€`; fillFeedback.classList.add('incorrect'); } fillFeedback.style.display = 'block'; }); }); startReviewBtn.addEventListener('click', () => { alert(`âœ… Starting review of ${USER_DATA.reviewList.length} words!\n\nThis would launch spaced repetition quiz in full version.`); }); markTodayBtn.addEventListener('click', () => { const todayStr = new Date().toISOString().split('T')[0]; USER_DATA.todayCompleted.add(todayStr); alert('ğŸ‰ Day marked! Keep up the great work!'); renderCalendar(); updateStats(); }); popupClose.addEventListener('click', () => { popup.style.display = 'none'; }); popup.addEventListener('click', (e) => { if (e.target === popup) popup.style.display = 'none'; }); document.getElementById('filter-scene').addEventListener('change', renderVideoGrid); document.getElementById('filter-level').addEventListener('change', renderVideoGrid); document.getElementById('search-input').addEventListener('input', renderVideoGrid); }
echo   function switchTab(tabId) { tabs.forEach(t => t.classList.remove('active')); sections.forEach(s => s.classList.remove('active')); document.querySelector(`.tab-btn[data-tab="${tabId}"]`).classList.add('active'); document.getElementById(tabId).classList.add('active'); }
echo   document.addEventListener('DOMContentLoaded', init);
echo ^</script^>
echo ^</body^>
echo ^</html^>
) > "%FOLDER%\index.html"

:: ========== 2. å†™å…¥ README.md ==========
(
echo # ğŸ§ ListenLab Â· YouTube è‹±è¯­ç²¾å¬è®­ç»ƒç«™
echo 
echo > ä¸“ä¸ºé›¶ç¼–ç¨‹åŸºç¡€è‹±è¯­å­¦ä¹ è€…æ‰“é€ ï½œçº¯å‰ç«¯ Â· å…æœåŠ¡å™¨ Â· GitHub Pages ä¸€é”®ä¸Šçº¿  
echo > âœ… å˜é€Ÿå¬åŠ›ï½œâœ… ç‚¹å‡»æŸ¥è¯ï½œâœ… å•å¥å¾ªç¯ï½œâœ… å¬å†™ç»ƒä¹ ï½œâœ… æ‰“å¡æ—¥å†ï½œâœ… ç”Ÿè¯æœ¬å¤ä¹ 
echo 
echo ## ğŸŒ åœ¨çº¿ä½“éªŒ
echo ğŸ‘‰ [https://yourname.github.io/listenlab/](https://yourname.github.io/listenlab/)  
echo ï¼ˆéƒ¨ç½²åæ›¿æ¢ `yourname` ä¸ºä½ è‡ªå·±çš„ GitHub ç”¨æˆ·åï¼‰
echo 
echo ## ğŸš€ å¿«é€Ÿéƒ¨ç½²ï¼ˆ3 åˆ†é’Ÿï¼‰
echo 1. **Fork æˆ–å…‹éš†æœ¬ä»“åº“**ï¼ˆæˆ–ç›´æ¥ä¸Šä¼  `index.html` + `favicon.ico` åˆ°æ–°ä»“åº“ï¼‰  
echo 2. è¿›å…¥ä»“åº“ â†’ Settings â†’ Pages â†’  
echo    - âœ… Source: `main branch`  
echo    - âœ… Folder: `/ (root)`  
echo    - ğŸ”˜ Save  
echo 3. å‡ ç§’åï¼Œç»¿è‰²æç¤ºå‡ºç° â†’ ç‚¹å‡»é“¾æ¥å³ç”¨ï¼
echo 
echo ## âœ¨ æ ¸å¿ƒåŠŸèƒ½
echo | æ¨¡å— | åŠŸèƒ½ |
echo |------|------|
echo | ğŸ“º **æ²‰æµ¸å­¦ä¹ ** | 0.5xï½2.0x è¿ç»­å˜é€Ÿã€å•å¥å¾ªç¯ã€å­—å¹•ç‚¹å‡»æŸ¥è¯ï¼ˆéŸ³æ ‡+é‡Šä¹‰+åŸå¥ä¾‹å¥ï¼‰ |
echo | ğŸ“ **è¯å¥ç»ƒä¹ ** | å¥å­å¬å†™ã€é€‰è¯å¡«ç©ºã€çŸ­è¯­æ­é…ï¼ˆè‡ªåŠ¨å…³è”å½“å‰è§†é¢‘é‡ç‚¹è¯ï¼‰ |
echo | ğŸ“… **æ‰“å¡ç®¡ç†** | å¯è§†åŒ–æ—¥å†ã€è¿ç»­æ‰“å¡å¥–åŠ±ã€å­¦ä¹ æ•°æ®ç»Ÿè®¡ï¼ˆåˆ†é’Ÿ/è¯æ±‡/è§†é¢‘ï¼‰ |
echo | ğŸ§  **å·©å›ºå¤ä¹ ** | ç”Ÿè¯æœ¬æŒ‰è‰¾å®¾æµ©æ–¯è§„å¾‹æé†’ã€æ¨¡ç³Šè¯é‡ç»ƒã€é—¯å…³æ¨¡å¼ï¼ˆåç»­å¯æ‰©å±•ï¼‰ |
echo 
echo ## ğŸ’¡ ä½¿ç”¨æç¤º
echo - ç‚¹å‡»å­—å¹•ä»»æ„å•è¯ â†’ å¼¹å‡ºè¯¦ç»†é‡Šä¹‰ï¼ˆä¾‹å¥å³è§†é¢‘åŸå¥ï¼‰  
echo - æ‹–åŠ¨è¯­é€Ÿæ»‘å— â†’ å®æ—¶æ˜¾ç¤º `0.7x` / `1.3x` ç­‰å¾®è°ƒå€¼  
echo - æ¯æ—¥å®Œæˆ 1 æ¬¡å¬å†™æˆ–å¤ä¹  â†’ ç‚¹å‡»æ—¥å†ä»Šæ—¥åœ†ç‚¹ âœ… å³æ‰“å¡æˆåŠŸ  
echo - æ‰€æœ‰æ•°æ®ä»…å­˜åœ¨æµè§ˆå™¨å†…å­˜ä¸­ï¼ˆåˆ·æ–°ä¸ä¸¢å¤±å½“å‰ä¼šè¯ï¼‰ï¼Œéšç§å®‰å…¨  
echo 
echo > ğŸŒŸ æ— è´¦å·ã€æ— æ³¨å†Œã€æ— è¿½è¸ª â€”â€” ä½ çš„è‹±è¯­è¿›æ­¥ï¼Œåªå±äºä½ è‡ªå·±ã€‚
) > "%FOLDER%\README.md"

:: ========== 3. ä¸‹è½½ favicon.icoï¼ˆä½¿ç”¨ PowerShell è‡ªåŠ¨ä¸‹è½½ï¼‰==========
PowerShell -Command "Invoke-WebRequest -Uri 'https://bailian-bmp-pre.oss-cn-hangzhou.aliyuncs.com/public/system_agent/favicon.ico' -OutFile '%FOLDER%\favicon.ico'" 2>nul

:: ========== 4. æ‰“åŒ…æˆ ZIP ==========
powershell -Command "Compress-Archive -Path '%FOLDER%' -DestinationPath 'listenlab.zip' -Force"

:: ========== å®Œæˆ ==========
echo.
echo âœ… æˆåŠŸï¼listenlab.zip å·²ç”Ÿæˆåœ¨å½“å‰æ–‡ä»¶å¤¹ï¼
echo ğŸ“Œ è¯·å°†è¯¥ ZIP è§£å‹ï¼ŒæŠŠå…¶ä¸­çš„ index.html ä¸Šä¼ åˆ° GitHub ä»“åº“æ ¹ç›®å½•å³å¯ã€‚
echo.
pause

